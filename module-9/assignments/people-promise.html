<!DOCTYPE html>
<html lang="en">

<body>
    <table id="people" border="1">
        <tr bgcolor="#9acd32">
            <th>ID</th>
            <th>Name</th>
            <th>Email</th>
            <th>Gender</th>
            <th>IP Address</th>
        </tr>
    </table>
    <script>
        const xhr = (url, method ="GET")=>new Promise((resolve)=>{
            const xhttp = new XMLHttpRequest();
            xhttp.onreadystatechange = function () {
                if (this.readyState == 4 && this.status == 200) {
                    resolve(this.responseXML);
                }
            };
        xhttp.open(method,url);
        xhttp.send();
        })

        xhr(`people.xml`).then(displayData)


        function stringToNode(html) {
            const template = document.createElement(`template`);
            html = html.trim();
            template.innerHTML = html;
            return template.content.firstChild;
        }

        function displayData(xmlDoc) {
            const tableElement = document.getElementById(`people`);

            const personNodes = xmlDoc.getElementsByTagName(`person`);
            for (let index = 0; index < personNodes.length; index++) {
                const personNode = personNodes[index];
                const tr = stringToNode(`<tr>
                    <td>${personNode.getElementsByTagName(`id`)[0].childNodes[0].nodeValue}</td>
                    <td>${personNode.getElementsByTagName(`first_name`)[0].childNodes[0].nodeValue}
                        ${personNode.getElementsByTagName(`last_name`)[0].childNodes[0].nodeValue}</td>
                    <td>${personNode.getElementsByTagName(`email`)[0].childNodes[0].nodeValue}</td>
                    <td>${personNode.getElementsByTagName(`gender`)[0].childNodes[0].nodeValue}</td>
                    <td>${personNode.getElementsByTagName(`ip_address`)[0].childNodes[0].nodeValue}</td>
                </tr>`);
                tableElement.appendChild(tr);
            }
        }

    </script>
</body>

</html>